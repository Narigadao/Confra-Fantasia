<!DOCTYPE html>
<html>
<head>
    <title>Resultados - Confraterniza√ß√£o</title>
    <style>
        body { background: #141414; color: white; font-family: Arial; 
               text-align: center; padding: 20px; margin: 0; }
        .container { max-width: 1200px; margin: 0 auto; }
        .fantasia { background: #333; margin: 15px; padding: 25px; 
                    border-radius: 15px; display: inline-block; min-width: 280px;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        .primeiro { background: linear-gradient(135deg, #E50914, #B20710); }
        .segundo { background: linear-gradient(135deg, #B20710, #8A0000); }
        .terceiro { background: linear-gradient(135deg, #8A0000, #660000); }
        h1 { color: #E50914; margin-bottom: 10px; font-size: 2.5em; }
        .atualizacao { color: #888; margin: 20px 0; font-size: 16px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÜ Resultados em Tempo Real</h1>
        <div class="atualizacao">
            ‚è∞ Atualizado em: <span id="hora">carregando...</span>
            <br><small>Atualizando automaticamente a cada 10 segundos</small>
        </div>
        <div id="resultados">Carregando resultados...</div>
        
        <div style="margin-top: 40px;">
            <a href="index.html" style="color: #E50914; text-decoration: none; 
               background: #333; padding: 10px 20px; border-radius: 5px;">
                ‚Üê Voltar para a p√°gina inicial
            </a>
        </div>
    </div>

    <script>
    const BIN_ID = "69174fdd43b1c97be9ad6212";
    const API_KEY = "$2a$10$JApmGfSiV9tlvLo0nOIFX.iVHlXtOO760ew/5wXcp5r78pKsUc5NC";

    async function carregarResultados() {
        try {
            const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                headers: { 'X-Master-Key': API_KEY }
            });
            const data = await response.json();
            
            const container = document.getElementById('resultados');
            
            // Verifica se h√° votos
            if (!data.record.votos || Object.keys(data.record.votos).length === 0) {
                container.innerHTML = `
                    <div style="background: #333; padding: 30px; border-radius: 10px; margin: 20px;">
                        <h3>‚è≥ Aguardando votos...</h3>
                        <p>Nenhum voto registrado ainda. Seja o primeiro a votar!</p>
                    </div>
                `;
                return;
            }
            
            // Converte votos para array e ordena
            const ranking = Object.entries(data.record.votos)
                .sort((a, b) => b[1] - a[1]);
            
            let html = '';
            ranking.forEach(([fantasia, votos], index) => {
                const classe = index === 0 ? 'primeiro' : 
                              index === 1 ? 'segundo' : 
                              index === 2 ? 'terceiro' : '';
                const trofeu = index === 0 ? 'ü•á' : 
                               index === 1 ? 'ü•à' : 
                               index === 2 ? 'ü•â' : 'üé≠';
                
                html += `
                    <div class="fantasia ${classe}">
                        <div style="font-size: 40px; margin-bottom: 10px;">${trofeu}</div>
                        <div style="font-size: 28px; font-weight: bold; margin-bottom: 15px;">
                            ${index + 1}¬∫ Lugar
                        </div>
                        <div style="font-size: 24px; margin: 15px 0; font-weight: bold;">
                            ${fantasia}
                        </div>
                        <div style="font-size: 32px; font-weight: bold;">
                            ${votos} voto${votos !== 1 ? 's' : ''}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // Atualiza hora
            document.getElementById('hora').textContent = new Date().toLocaleTimeString('pt-BR');
            
        } catch (error) {
            console.error('Erro:', error);
            document.getElementById('resultados').innerHTML = `
                <div style="background: #333; padding: 20px; border-radius: 10px; margin: 20px;">
                    <h3>‚ùå Erro ao carregar resultados</h3>
                    <p>Tente recarregar a p√°gina.</p>
                </div>
            `;
        }
    }

    // Atualiza a cada 10 segundos
    carregarResultados();
    setInterval(carregarResultados, 10000);
    </script>
</body>
</html>
