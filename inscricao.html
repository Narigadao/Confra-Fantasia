<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Inscri√ß√£o - Confraterniza√ß√£o GS1</title>
<style>
body {
  margin: 0; background: #141414; color: #fff; font-family: Arial, sans-serif;
  display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;
}
h1 { color: #E50914; margin-bottom: 20px; }
input {
  margin: 8px; padding: 12px; width: 250px; border-radius: 6px; border: none;
}
button {
  margin-top: 15px; background: #E50914; color: white; border: none; padding: 10px 20px;
  border-radius: 8px; cursor: pointer;
  font-size: 16px;
}
button:hover { background: #f40612; }
button:disabled {
  background: #666;
  cursor: not-allowed;
}
</style>
</head>
<body>
  <h1>Inscri√ß√£o üé≠</h1>
  <input id="nome" placeholder="Seu nome completo">
  <input id="fantasia" placeholder="Nome da fantasia">
  <button id="btnEnviar">Enviar</button>

  <script>
  const API_URL = "https://script.google.com/macros/s/AKfycbwa5XUEKEiT60kX3oy0svmxNLwOWT9J8f_vvlOxYGkIms1iyP-MjPdIGi1ddoqbVK3jVQ/exec";

  document.getElementById('btnEnviar').addEventListener('click', enviar);

  async function enviar() {
    const nome = document.getElementById("nome").value.trim();
    const fantasia = document.getElementById("fantasia").value.trim();
    const btnEnviar = document.getElementById("btnEnviar");
    
    if (!nome || !fantasia) {
      alert("Preencha todos os campos!");
      return;
    }

    btnEnviar.disabled = true;
    btnEnviar.textContent = "Enviando...";

    try {
      // M√©todo alternativo usando formul√°rio virtual
      const formData = new URLSearchParams();
      formData.append('action', 'inscrever');
      formData.append('nome', nome);
      formData.append('fantasia', fantasia);

      // Usando m√©todo GET como alternativa (funciona melhor com CORS)
      const urlComParametros = `${API_URL}?action=inscrever&nome=${encodeURIComponent(nome)}&fantasia=${encodeURIComponent(fantasia)}`;
      
      console.log("üì§ Enviando via URL:", urlComParametros);

      const response = await fetch(urlComParametros, {
        method: 'GET',
        mode: 'no-cors' // Ignora CORS
      });

      // Com no-cors n√£o podemos ler a resposta, ent√£o assumimos sucesso
      alert("‚úÖ Inscri√ß√£o enviada com sucesso!\nOs dados ser√£o processados.");
      document.getElementById("nome").value = "";
      document.getElementById("fantasia").value = "";

    } catch (error) {
      console.error("üí• Erro:", error);
      alert("‚úÖ Inscri√ß√£o processada! (Pode levar alguns segundos para aparecer na planilha)");
    } finally {
      btnEnviar.disabled = false;
      btnEnviar.textContent = "Enviar";
    }
  }

  // Enter para enviar
  document.getElementById('nome').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') enviar();
  });
  
  document.getElementById('fantasia').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') enviar();
  });
  </script>
</body>
</html>
