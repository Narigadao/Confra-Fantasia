<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Inscri√ß√£o - Confraterniza√ß√£o GS1</title>
<style>
body {
  margin: 0; background: #141414; color: #fff; font-family: Arial, sans-serif;
  display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;
}
h1 { color: #E50914; margin-bottom: 20px; }
input {
  margin: 8px; padding: 12px; width: 250px; border-radius: 6px; border: none;
}
button {
  margin-top: 15px; background: #E50914; color: white; border: none; padding: 10px 20px;
  border-radius: 8px; cursor: pointer;
  font-size: 16px;
}
button:hover { background: #f40612; }
button:disabled {
  background: #666;
  cursor: not-allowed;
}
</style>
</head>
<body>
  <h1>Inscri√ß√£o üé≠</h1>
  <input id="nome" placeholder="Seu nome completo">
  <input id="fantasia" placeholder="Nome da fantasia">
  <button id="btnEnviar">Enviar</button>

  <script>
  // USE A NOVA URL QUE VOC√ä ME PASSOU
  const API_URL = "https://script.google.com/macros/s/AKfycbwa5XUEKEiT60kX3oy0svmxNLwOWT9J8f_vvlOxYGkIms1iyP-MjPdIGi1ddoqbVK3jVQ/exec";

  document.getElementById('btnEnviar').addEventListener('click', enviar);

  async function enviar() {
    console.log("üöÄ Iniciando envio...");
    
    const nome = document.getElementById("nome").value.trim();
    const fantasia = document.getElementById("fantasia").value.trim();
    const btnEnviar = document.getElementById("btnEnviar");
    
    if (!nome || !fantasia) {
      alert("Preencha todos os campos!");
      return;
    }

    btnEnviar.disabled = true;
    btnEnviar.textContent = "Enviando...";

    try {
      console.log("üì§ Enviando:", { nome, fantasia });

      const response = await fetch(API_URL, {
        method: 'POST',
        body: JSON.stringify({
          action: 'inscrever',
          nome: nome,
          fantasia: fantasia
        }),
        headers: {
          'Content-Type': 'application/json'
        }
      });

      console.log("üì• Status:", response.status);
      
      const result = await response.json();
      console.log("‚úÖ Resultado:", result);

      if (result.success) {
        alert("‚úÖ " + result.message);
        document.getElementById("nome").value = "";
        document.getElementById("fantasia").value = "";
        
        // Verifica se os dados foram salvos
        setTimeout(verificarDados, 1000);
      } else {
        alert("‚ùå " + result.message);
      }

    } catch (error) {
      console.error("üí• Erro:", error);
      alert("üö´ Erro ao enviar. Abra o console (F12) para detalhes.");
    } finally {
      btnEnviar.disabled = false;
      btnEnviar.textContent = "Enviar";
    }
  }

  // Fun√ß√£o para verificar se os dados foram salvos
  async function verificarDados() {
    try {
      const response = await fetch(API_URL);
      const dados = await response.json();
      console.log("üìä Dados na planilha:", dados);
    } catch (error) {
      console.error("Erro ao verificar dados:", error);
    }
  }

  // Enter para enviar
  document.getElementById('nome').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') enviar();
  });
  
  document.getElementById('fantasia').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') enviar();
  });

  console.log("‚úÖ P√°gina pronta! API URL:", API_URL);
  </script>
</body>
</html>
