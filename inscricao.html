<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Inscri√ß√£o - Confraterniza√ß√£o GS1</title>
<style>
body {
  margin: 0; background: #141414; color: #fff; font-family: Arial, sans-serif;
  display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;
}
h1 { color: #E50914; margin-bottom: 20px; }
input {
  margin: 8px; padding: 12px; width: 250px; border-radius: 6px; border: none;
}
button {
  margin-top: 15px; background: #E50914; color: white; border: none; padding: 10px 20px;
  border-radius: 8px; cursor: pointer;
  font-size: 16px;
}
button:hover { background: #f40612; }
button:disabled {
  background: #666;
  cursor: not-allowed;
}
</style>
</head>
<body>
  <h1>Inscri√ß√£o üé≠</h1>
  <input id="nome" placeholder="Seu nome completo">
  <input id="fantasia" placeholder="Nome da fantasia">
  <button id="btnEnviar" onclick="enviar()">Enviar</button>

  <script>
  const api = "https://script.google.com/macros/s/AKfycbwa5XUEKEiT60kX3oy0svmxNLwOWT9J8f_vvlOxYGkIms1iyP-MjPdIGi1ddoqbVK3jVQ/exec";

  async function enviar() {
    console.log("Fun√ß√£o enviar chamada!");
    
    const nome = document.getElementById("nome").value.trim();
    const fantasia = document.getElementById("fantasia").value.trim();
    const btnEnviar = document.getElementById("btnEnviar");
    
    console.log("Nome:", nome);
    console.log("Fantasia:", fantasia);
    
    if (!nome || !fantasia) {
      alert("Preencha todos os campos!");
      return;
    }

    // Desabilita o bot√£o durante o envio
    btnEnviar.disabled = true;
    btnEnviar.textContent = "Enviando...";

    try {
      console.log("Fazendo requisi√ß√£o para API...");
      
      const response = await fetch(api, {
        method: "POST",
        body: JSON.stringify({ 
          action: "inscrever", 
          nome: nome, 
          fantasia: fantasia 
        }),
        headers: { 
          "Content-Type": "application/json" 
        }
      });
      
      console.log("Resposta recebida:", response);
      
      const result = await response.json();
      console.log("Resultado:", result);
      
      if (result.success) {
        alert("‚úÖ " + result.message);
        document.getElementById("nome").value = "";
        document.getElementById("fantasia").value = "";
      } else {
        alert("‚ùå " + result.message);
      }
    } catch (error) {
      console.error("Erro completo:", error);
      alert("üö´ Erro ao conectar com o servidor. Verifique o console (F12) para detalhes.");
    } finally {
      // Reabilita o bot√£o
      btnEnviar.disabled = false;
      btnEnviar.textContent = "Enviar";
    }
  }

  // Adiciona evento de Enter nos campos
  document.getElementById('nome').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') enviar();
  });
  
  document.getElementById('fantasia').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') enviar();
  });

  console.log("P√°gina carregada - script funcionando!");
  </script>
</body>
</html>
