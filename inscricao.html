<!DOCTYPE html>
<html>
<head>
    <title>Inscri√ß√£o - Confraterniza√ß√£o</title>
    <style>
        body { background: #141414; color: white; font-family: Arial; 
               display: flex; flex-direction: column; align-items: center; 
               justify-content: center; height: 100vh; margin: 0; }
        input { margin: 10px; padding: 12px; width: 300px; border-radius: 6px; border: none; }
        button { background: #E50914; color: white; border: none; padding: 12px 24px; 
                 border-radius: 8px; cursor: pointer; margin-top: 15px; font-size: 16px; }
        button:hover { background: #f40612; }
    </style>
</head>
<body>
    <h1>üìù Inscreva sua Fantasia</h1>
    <input id="nome" placeholder="Seu nome completo">
    <input id="fantasia" placeholder="Nome da fantasia">
    <button onclick="inscrever()">Enviar Inscri√ß√£o</button>

    <script>
    const BIN_ID = "69174fdd43b1c97be9ad6212";
    const API_KEY = "$2a$10$JApmGfSiV9tlvLo0nOIFX.iVHlXtOO760ew/5wXcp5r78pKsUc5NC";

    async function inscrever() {
        const nome = document.getElementById('nome').value.trim();
        const fantasia = document.getElementById('fantasia').value.trim();
        
        if (!nome || !fantasia) {
            alert('Preencha todos os campos!');
            return;
        }

        try {
            // Pega dados atuais
            const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                headers: { 'X-Master-Key': API_KEY }
            });
            const data = await response.json();
            
            // Adiciona nova inscri√ß√£o
            data.record.inscricoes.push({
                nome: nome,
                fantasia: fantasia,
                timestamp: new Date().toISOString()
            });

            // Atualiza no JSONBin
            const updateResponse = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Master-Key': API_KEY
                },
                body: JSON.stringify(data.record)
            });

            if (updateResponse.ok) {
                alert('‚úÖ Inscri√ß√£o realizada com sucesso!');
                document.getElementById('nome').value = '';
                document.getElementById('fantasia').value = '';
            } else {
                alert('‚ùå Erro ao salvar inscri√ß√£o.');
            }
            
        } catch (error) {
            console.error('Erro:', error);
            alert('‚ùå Erro ao inscrever. Tente novamente.');
        }
    }

    // Enter para enviar
    document.getElementById('nome').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') inscrever();
    });
    document.getElementById('fantasia').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') inscrever();
    });
    </script>
</body>
</html>
